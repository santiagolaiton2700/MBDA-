CREATE OR REPLACE PACKAGE PC_REGISTROS IS 
    PROCEDURE AD_REGISTRO(xTiempo IN NUMBER,xPosicion IN NUMBER, xRevision IN VARCHAR,xDificultad IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR);
    PROCEDURE MOD_REGISTRO(xNumero IN NUMBER,xRevision IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR);
    FUNCTION CO_REGISTRO RETURN SYS_REFCURSOR;
END PC_REGISTROS;
/
CREATE OR REPLACE PACKAGE BODY PC_REGISTROS IS
    PROCEDURE AD_REGISTRO(xTiempo IN NUMBER, xPosicion IN NUMBER, xRevision IN VARCHAR, xDificultad IN VARCHAR, xFOTO IN VARCHAR , xComentario IN VARCHAR) IS
        BEGIN
            INSERT INTO REGISTRO(TIEMPO, POSICION, REVISION, DIFICULTAD, FOTO, COMENTARIO) VALUES(xtiempo,xPosicion, xRevision,xDificultad ,xFOTO ,xComentario);
            COMMIT;
            EXCEPTION
            WHEN OTHERS THEN
                ROLLBACK;
                RAISE_APPLICATION_ERROR(-20009,'NO SE PUEDE INSERTAR');
    END;
    PROCEDURE MOD_REGISTRO (xNumero IN NUMBER,xRevision IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR) IS 
        BEGIN 
            UPDATE REGISTRO SET revision = xrevision, foto=xfoto ,comentario=xComentario where numero=xNUMERO;
        COMMIT;
        EXCEPTION
            WHEN OTHERS THEN
                ROLLBACK;
                RAISE_APPLICATION_ERROR(-20010,'NO SE PUEDE MODIFICAR');
    END;
    
    FUNCTION CO_REGISTRO  RETURN SYS_REFCURSOR IS CO_ER SYS_REFCURSOR;
    BEGIN
    OPEN CO_ER FOR 
        SELECT * FROM REGISTRO;
    RETURN CO_ER;
    END;
END PC_REGISTROS;