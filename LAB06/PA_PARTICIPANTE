CREATE OR REPLACE PACKAGE PA_PARTICIPANTE IS
    PROCEDURE AD_REGISTRO(xTiempo IN NUMBER,xPosicion IN NUMBER, xRevision IN VARCHAR,xDificultad IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR);
    PROCEDURE AD_FOTO(xNumeroRegistro IN NUMBER,xFoto IN VARCHAR);
    PROCEDURE MOD_REGISTRO(xNumero IN NUMBER,xRevision IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR);
    PROCEDURE MOD_FOTO(xNumeroRegistro IN NUMBER,xFoto IN VARCHAR);
    FUNCTION CO_REGISTRO RETURN SYS_REFCURSOR;
    FUNCTION CO_FOTO RETURN SYS_REFCURSOR;
END PA_PARTICIPANTE;
/
CREATE OR REPLACE PACKAGE BODY PA_PARTICIPANTE IS
    PROCEDURE AD_REGISTRO(xTiempo IN NUMBER,xPosicion IN NUMBER, xRevision IN VARCHAR,xDificultad IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR)IS
    BEGIN
        PC_REGISTROS.AD_REGISTRO(xTiempo,xPosicion,xRevision,xDificultad,xFOTO,xComentario);
    COMMIT;
    EXCEPTION
    WHEN OTHERS THEN
    ROLLBACK;
    RAISE_APPLICATION_ERROR(-20032,'se encontro un error - '||SQLCODE||'-ERROR-'||SQLERRM);
    END;    
    PROCEDURE AD_FOTO(xNumeroRegistro IN NUMBER,xFoto IN VARCHAR)IS
    BEGIN
        PC_REGISTROS.AD_FOTO(xNumeroRegistro,xFoto);
    COMMIT;
    EXCEPTION 
    WHEN OTHERS THEN
    ROLLBACK;
    RAISE_APPLICATION_ERROR(-20033,'se encontro un error - '||SQLCODE||'-ERROR-'||SQLERRM);
    END;
    PROCEDURE MOD_REGISTRO(xNumero IN NUMBER,xRevision IN VARCHAR,xFOTO IN VARCHAR ,xComentario IN VARCHAR)IS
    BEGIN
        PC_REGISTROS.MOD_REGISTRO(xNumero,xRevision ,xFOTO,xComentario);
    COMMIT;
    EXCEPTION
    WHEN OTHERS THEN
    ROLLBACK;
    RAISE_APPLICATION_ERROR(-20034,'se encontro un error - '||SQLCODE||'-ERROR-'||SQLERRM);
    END;
    PROCEDURE MOD_FOTO(xNumeroRegistro IN NUMBER,xFoto IN VARCHAR)IS
    BEGIN 
        PC_REGISTROS.MOD_FOTO(xNumeroRegistro,xFoto);
    COMMIT;
    EXCEPTION
    WHEN OTHERS THEN
    ROLLBACK;
    RAISE_APPLICATION_ERROR(-20035,'se encontro un error - '||SQLCODE||'-ERROR-'||SQLERRM);
    END;
    FUNCTION CO_REGISTRO RETURN SYS_REFCURSOR IS CON_REGISTRO SYS_REFCURSOR;
        BEGIN
            CON_REGISTRO:=PC_REGISTROS.CO_REGISTRO;
        RETURN CON_REGISTRO;
    END;
    FUNCTION CO_FOTO RETURN SYS_REFCURSOR IS CON_FOTO SYS_REFCURSOR;
        BEGIN
            CON_FOTO:=PC_REGISTROS.CO_FOTO;
        RETURN CON_FOTO;
    END;
END PA_PARTICIPANTE;
/
